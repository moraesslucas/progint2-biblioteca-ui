{"version":3,"sources":["webpack:///./src/services/livro.service.js","webpack:///./src/components/livros/Livros.vue?2042","webpack:///./src/components/livros/scenarios/DataTableSortingPagination.vue?082c","webpack:///src/components/livros/scenarios/DataTableSortingPagination.vue","webpack:///./src/components/livros/scenarios/DataTableSortingPagination.vue?6add","webpack:///./src/components/livros/scenarios/DataTableSortingPagination.vue","webpack:///src/components/livros/Livros.vue","webpack:///./src/components/livros/Livros.vue?da9b","webpack:///./src/components/livros/Livros.vue","webpack:///./src/services/auth-header.js"],"names":["API_URL","LivroService","params","config","headers","authHeader","request","axios","get","id","delete","livro","post","put","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","attrs","slot","name","_v","fields","livros","totalPages","loading","on","readItems","scopedSlots","_u","key","fn","props","rowData","path","$event","deleteLivro","data","perPage","computed","title","dataClass","created","methods","size","page","component","components","DataTableSortingPagination","user","JSON","parse","localStorage","getItem","access_token","Authorization"],"mappings":"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","file":"js/chunk-21be736b.ae83d769.js","sourcesContent":["import axios from 'axios'\nimport authHeader from './auth-header'\n\nconst API_URL = 'https://protected-fjord-42747.herokuapp.com/livro/'\n\nclass LivroService {\n  buscarLivros (params) {\n    const config = {\n      headers: authHeader(),\n      params: params,\n    }\n\n    const request = axios.get(API_URL, config)\n    return request\n  }\n\n  deleteLivro (id) {\n    return axios.delete(API_URL + id, { headers: authHeader() })\n  }\n\n  buscarLivro (id) {\n    return axios.get(API_URL + id, { headers: authHeader() })\n  }\n\n  criarLivro (livro) {\n    return axios.post(API_URL, livro, { headers: authHeader() })\n  }\n\n  atualizarLivro (id, livro) {\n    return axios.put(API_URL + id, livro, { headers: authHeader() })\n  }\n}\n\nexport default new LivroService()\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('data-table-sorting-pagination',{staticClass:\"mb-4\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('va-card',{attrs:{\"title\":'Livros'}},[_c('template',{slot:\"actions\"},[_c('va-button',{attrs:{\"to\":{name: 'novo-livro'},\"color\":\"info\",\"icon\":\"fa fa-plus\"}},[_vm._v(\"Novo livro\")])],1),_c('va-data-table',{attrs:{\"fields\":_vm.fields,\"data\":_vm.livros,\"per-page\":20,\"totalPages\":_vm.totalPages,\"loading\":_vm.loading,\"api-mode\":\"\"},on:{\"page-selected\":_vm.readItems},scopedSlots:_vm._u([{key:\"actions\",fn:function(props){return [_c('va-popover',{attrs:{\"message\":(\"Editar \" + (props.rowData.nome)),\"placement\":\"top\"}},[_c('va-button',{attrs:{\"flat\":\"\",\"small\":\"\",\"color\":\"gray\",\"icon\":\"fa fa-pencil\",\"to\":{path: 'livro/' + props.rowData.id}}})],1),_c('va-popover',{attrs:{\"message\":(\"Deletar \" + (props.rowData.nome)),\"placement\":\"top\"}},[_c('va-button',{attrs:{\"flat\":\"\",\"small\":\"\",\"color\":\"gray\",\"icon\":\"fa fa-trash\"},on:{\"click\":function($event){return _vm.deleteLivro(props.rowData.id)}}})],1)]}}])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <va-card :title=\"'Livros'\">\n    <template slot=\"actions\">\n      <va-button :to=\"{name: 'novo-livro'}\" color=\"info\" icon=\"fa fa-plus\">Novo livro</va-button>\n    </template>\n\n    <va-data-table\n      :fields=\"fields\"\n      :data=\"livros\"\n      :per-page=\"20\"\n      :totalPages=\"totalPages\"\n      @page-selected=\"readItems\"\n      :loading=\"loading\"\n      api-mode\n    >\n      <template slot=\"actions\" slot-scope=\"props\">\n        <va-popover :message=\"`Editar ${props.rowData.nome}`\" placement=\"top\">\n          <va-button flat small color=\"gray\" icon=\"fa fa-pencil\" :to=\"{path: 'livro/' + props.rowData.id}\"/>\n        </va-popover>\n\n        <va-popover :message=\"`Deletar ${props.rowData.nome}`\" placement=\"top\">\n          <va-button flat small color=\"gray\" icon=\"fa fa-trash\" @click=\"deleteLivro(props.rowData.id)\"/>\n        </va-popover>\n      </template>\n    </va-data-table>\n  </va-card>\n</template>\n\n<script>\nimport LivroService from '../../../services/livro.service'\n\nexport default {\n  data () {\n    return {\n      livros: [],\n      perPage: 20,\n      totalPages: 0,\n      loading: false,\n    }\n  },\n  computed: {\n    fields () {\n      return [{\n        name: 'id',\n        title: '#',\n      }, {\n        name: 'nome',\n        title: 'Nome',\n      }, {\n        name: 'editora',\n        title: 'Editora',\n      }, {\n        name: 'autor',\n        title: 'Autor',\n      }, {\n        name: 'anoPublicacao',\n        title: 'Ano de Publicação',\n      }, {\n        name: 'isbn',\n        title: 'ISBN',\n      }, {\n        name: '__slot:actions',\n        dataClass: 'text-right',\n      }]\n    },\n  },\n  created () {\n    this.readItems()\n  },\n  methods: {\n    readItems (page = 0) {\n      this.loading = true\n\n      const params = {\n        size: this.perPage,\n        page: page - 1,\n      }\n      LivroService.buscarLivros(params)\n        .then(response => {\n          this.livros = response.data.content\n          this.totalPages = response.data.totalPages\n          this.loading = false\n        })\n    },\n    deleteLivro (id) {\n      LivroService.deleteLivro(id)\n        .then(response => {\n          this.livros = this.livros.filter(item => item.id !== id)\n        })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTableSortingPagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTableSortingPagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataTableSortingPagination.vue?vue&type=template&id=5447a670&\"\nimport script from \"./DataTableSortingPagination.vue?vue&type=script&lang=js&\"\nexport * from \"./DataTableSortingPagination.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <data-table-sorting-pagination class=\"mb-4\"/>\n  </div>\n</template>\n\n<script>\nimport DataTableSortingPagination from './scenarios/DataTableSortingPagination.vue'\n\nexport default {\n  components: {\n    DataTableSortingPagination,\n  },\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Livros.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Livros.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Livros.vue?vue&type=template&id=0fb53d18&\"\nimport script from \"./Livros.vue?vue&type=script&lang=js&\"\nexport * from \"./Livros.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function authHeader () {\n  const user = JSON.parse(localStorage.getItem('user'))\n\n  if (user && user.access_token) {\n    return { Authorization: `Bearer ${user.access_token}` }\n  } else {\n    return {}\n  }\n}\n"],"sourceRoot":""}