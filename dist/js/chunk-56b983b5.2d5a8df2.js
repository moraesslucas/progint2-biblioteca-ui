(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56b983b5"],{"209b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("data-table-sorting-pagination",{staticClass:"mb-4"})],1)},n=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("va-card",{attrs:{title:"Empréstimos"}},[a("template",{slot:"actions"},[a("va-toggle",{attrs:{label:"Somente ativos"},on:{input:function(t){return e.busca()}},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),a("va-button",{attrs:{to:{name:"novo-emprestimo"},color:"info",icon:"fa fa-plus"}},[e._v("Novo empréstimo")])],1),a("va-data-table",{attrs:{fields:e.fields,data:e.emprestimos,"per-page":20,totalPages:e.totalPages,loading:e.loading,"api-mode":""},on:{"page-selected":e.busca},scopedSlots:e._u([{key:"actions",fn:function(t){return[e.mode?a("va-popover",{attrs:{message:"Realizar devolução do empréstimo #"+t.rowData.id,placement:"left"}},[a("va-button",{attrs:{flat:"",small:"",color:"gray",icon:"fa fa-mail-forward"},on:{click:function(a){return e.deleteLivro(t.rowData.id)}}})],1):e._e()]}}])})],2)},i=[],s=a("db20"),l={data:function(){return{emprestimos:[],perPage:20,totalPages:0,mode:!0,loading:!1}},computed:{fields:function(){return[{name:"id",title:"#"},{name:"livro.nome",title:"Nome do Livro"},{name:"cliente.nome",title:"Nome do Cliente"},{name:"dataEmprestimo",title:"Data do Empréstimo"},{name:"dataPrevistaEntrega",title:"Data Prevista de Devolução"},{name:"dataEfetivaEntrega",title:"Data Efetiva de Devolução"},{name:"__slot:actions",dataClass:"text-right"}]}},created:function(){this.busca()},methods:{busca:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0;var a={size:this.perPage,page:t-1,ativo:this.mode,sort:"id,asc"};s["a"].buscarEmprestimos(a).then((function(t){e.emprestimos=t.data.content,e.totalPages=t.data.totalPages,e.loading=!1,console.log(e.loading)}))},deleteLivro:function(e){var t=this;s["a"].deleteEmprestimo(e).then((function(a){1==t.mode&&(t.emprestimos=t.emprestimos.filter((function(t){return t.id!==e})))}))}}},c=l,u=a("2877"),m=Object(u["a"])(c,r,i,!1,null,null,null),d=m.exports,p={components:{DataTableSortingPagination:d}},f=p,v=Object(u["a"])(f,o,n,!1,null,null,null);t["default"]=v.exports},c4c6:function(e,t,a){"use strict";function o(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.access_token?{Authorization:"Bearer ".concat(e.access_token)}:{}}a.d(t,"a",(function(){return o}))},db20:function(e,t,a){"use strict";var o=a("bc3a"),n=a.n(o),r=a("c4c6");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}var c="https://protected-fjord-42747.herokuapp.com/emprestimo/",u=function(){function e(){i(this,e)}return l(e,[{key:"buscarEmprestimos",value:function(e){var t={headers:Object(r["a"])(),params:e},a=n.a.get(c,t);return a}},{key:"deleteEmprestimo",value:function(e){return n.a.delete(c+e,{headers:Object(r["a"])()})}},{key:"criarEmprestimo",value:function(e){return n.a.post(c,e,{headers:Object(r["a"])()})}}]),e}();t["a"]=new u}}]);
//# sourceMappingURL=chunk-56b983b5.2d5a8df2.js.map