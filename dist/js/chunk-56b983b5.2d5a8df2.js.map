{"version":3,"sources":["webpack:///./src/components/emprestimos/Emprestimos.vue?246c","webpack:///./src/components/emprestimos/scenarios/DataTableSortingPagination.vue?ed1b","webpack:///src/components/emprestimos/scenarios/DataTableSortingPagination.vue","webpack:///./src/components/emprestimos/scenarios/DataTableSortingPagination.vue?9e20","webpack:///./src/components/emprestimos/scenarios/DataTableSortingPagination.vue","webpack:///src/components/emprestimos/Emprestimos.vue","webpack:///./src/components/emprestimos/Emprestimos.vue?df37","webpack:///./src/components/emprestimos/Emprestimos.vue","webpack:///./src/services/auth-header.js","webpack:///./src/services/emprestimo.service.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","attrs","slot","on","$event","busca","model","value","callback","$$v","mode","expression","name","_v","fields","emprestimos","totalPages","loading","scopedSlots","_u","key","fn","props","rowData","deleteLivro","id","_e","data","perPage","computed","title","dataClass","created","methods","size","page","ativo","sort","component","components","DataTableSortingPagination","authHeader","user","JSON","parse","localStorage","getItem","access_token","Authorization","API_URL","EmprestimoService","params","config","headers","request","axios","get","delete","emprestimo","post"],"mappings":"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","file":"js/chunk-56b983b5.2d5a8df2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('data-table-sorting-pagination',{staticClass:\"mb-4\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('va-card',{attrs:{\"title\":'Empréstimos'}},[_c('template',{slot:\"actions\"},[_c('va-toggle',{attrs:{\"label\":\"Somente ativos\"},on:{\"input\":function($event){return _vm.busca()}},model:{value:(_vm.mode),callback:function ($$v) {_vm.mode=$$v},expression:\"mode\"}}),_c('va-button',{attrs:{\"to\":{name: 'novo-emprestimo'},\"color\":\"info\",\"icon\":\"fa fa-plus\"}},[_vm._v(\"Novo empréstimo\")])],1),_c('va-data-table',{attrs:{\"fields\":_vm.fields,\"data\":_vm.emprestimos,\"per-page\":20,\"totalPages\":_vm.totalPages,\"loading\":_vm.loading,\"api-mode\":\"\"},on:{\"page-selected\":_vm.busca},scopedSlots:_vm._u([{key:\"actions\",fn:function(props){return [(_vm.mode)?_c('va-popover',{attrs:{\"message\":(\"Realizar devolução do empréstimo #\" + (props.rowData.id)),\"placement\":\"left\"}},[_c('va-button',{attrs:{\"flat\":\"\",\"small\":\"\",\"color\":\"gray\",\"icon\":\"fa fa-mail-forward\"},on:{\"click\":function($event){return _vm.deleteLivro(props.rowData.id)}}})],1):_vm._e()]}}])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <va-card :title=\"'Empréstimos'\">\n    <template slot=\"actions\">\n      <va-toggle v-model=\"mode\" label=\"Somente ativos\" @input=\"busca()\"/>\n      <va-button :to=\"{name: 'novo-emprestimo'}\" color=\"info\" icon=\"fa fa-plus\">Novo empréstimo</va-button>\n    </template>\n\n    <va-data-table\n      :fields=\"fields\"\n      :data=\"emprestimos\"\n      :per-page=\"20\"\n      :totalPages=\"totalPages\"\n      @page-selected=\"busca\"\n      :loading=\"loading\"\n      api-mode\n    >\n      <template slot=\"actions\" slot-scope=\"props\">\n        <va-popover v-if=\"mode\" :message=\"`Realizar devolução do empréstimo #${props.rowData.id}`\" placement=\"left\">\n          <va-button flat small color=\"gray\" icon=\"fa fa-mail-forward\" @click=\"deleteLivro(props.rowData.id)\"/>\n        </va-popover>\n      </template>\n    </va-data-table>\n  </va-card>\n</template>\n\n<script>\nimport EmprestimoService from '../../../services/emprestimo.service'\n\nexport default {\n  data () {\n    return {\n      emprestimos: [],\n      perPage: 20,\n      totalPages: 0,\n      mode: true,\n      loading: false,\n    }\n  },\n  computed: {\n    fields () {\n      return [{\n        name: 'id',\n        title: '#',\n      }, {\n        name: 'livro.nome',\n        title: 'Nome do Livro',\n      }, {\n        name: 'cliente.nome',\n        title: 'Nome do Cliente',\n      }, {\n        name: 'dataEmprestimo',\n        title: 'Data do Empréstimo',\n      }, {\n        name: 'dataPrevistaEntrega',\n        title: 'Data Prevista de Devolução',\n      }, {\n        name: 'dataEfetivaEntrega',\n        title: 'Data Efetiva de Devolução',\n      }, {\n        name: '__slot:actions',\n        dataClass: 'text-right',\n      }]\n    },\n  },\n  created () {\n    this.busca()\n  },\n  methods: {\n    busca (page = 0) {\n      this.loading = true\n\n      const params = {\n        size: this.perPage,\n        page: page - 1,\n        ativo: this.mode,\n        sort: 'id,asc',\n      }\n\n      EmprestimoService.buscarEmprestimos(params)\n        .then(response => {\n          this.emprestimos = response.data.content\n          this.totalPages = response.data.totalPages\n          this.loading = false\n          console.log(this.loading)\n        })\n    },\n    deleteLivro (id) {\n      EmprestimoService.deleteEmprestimo(id)\n        .then(response => {\n          if (this.mode == 1) {\n            this.emprestimos = this.emprestimos.filter(item => item.id !== id)\n          }\n        })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTableSortingPagination.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataTableSortingPagination.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataTableSortingPagination.vue?vue&type=template&id=eb22e200&\"\nimport script from \"./DataTableSortingPagination.vue?vue&type=script&lang=js&\"\nexport * from \"./DataTableSortingPagination.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <data-table-sorting-pagination class=\"mb-4\"/>\n  </div>\n</template>\n\n<script>\nimport DataTableSortingPagination from './scenarios/DataTableSortingPagination.vue'\n\nexport default {\n  components: {\n    DataTableSortingPagination,\n  },\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emprestimos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emprestimos.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Emprestimos.vue?vue&type=template&id=448e027c&\"\nimport script from \"./Emprestimos.vue?vue&type=script&lang=js&\"\nexport * from \"./Emprestimos.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function authHeader () {\n  const user = JSON.parse(localStorage.getItem('user'))\n\n  if (user && user.access_token) {\n    return { Authorization: `Bearer ${user.access_token}` }\n  } else {\n    return {}\n  }\n}\n","import axios from 'axios'\nimport authHeader from './auth-header'\n\nconst API_URL = 'https://protected-fjord-42747.herokuapp.com/emprestimo/'\n\nclass EmprestimoService {\n  buscarEmprestimos (params) {\n    const config = {\n      headers: authHeader(),\n      params: params,\n    }\n\n    const request = axios.get(API_URL, config)\n    return request\n  }\n\n  deleteEmprestimo (id) {\n    return axios.delete(API_URL + id, { headers: authHeader() })\n  }\n\n  criarEmprestimo (emprestimo) {\n    return axios.post(API_URL, emprestimo, { headers: authHeader() })\n  }\n}\n\nexport default new EmprestimoService()\n"],"sourceRoot":""}